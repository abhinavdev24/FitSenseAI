### Suggested Team Roles (for a 6-person team)

To better organize the work, you could consider splitting the team by specialty:

*   **Data/MLOps (2 people):** Focus on data ingestion, processing pipelines, infrastructure (Terraform, k8s), and model deployment/monitoring.
*   **Machine Learning (2 people):** Focus on the core AI/ML tasks: teacher model data generation, student model fine-tuning, RAG implementation, and evaluation.
*   **Backend (1 person):** Develops and maintains the Flask API, business logic, and database interactions.
*   **Frontend/Mobile (1 person):** Develops and maintains the cross-platform mobile application.

---

### Project Task Breakdown & Dependencies

Here is the project plan, broken down by phases based on the timeline.

#### **Phase 1: Foundation & Data (Weeks 1-2)**

This phase focuses on setting up the project structure and building the data foundation.

*   **Task 1: Project Scaffolding & Planning**
    *   **Subtasks:**
        1.  Initialize the GitHub repository with the proposed folder structure (`docs/`, `data/`, `training/`, `backend/`, etc.).
        2.  Finalize and commit the `data_card.md` and `architecture.md` documents.
        3.  Establish and document the final data schemas for exercises and user logs.
        4.  Review and finalize the licensing plan for all data sources (wger, PMC OA, etc.).
    *   **Dependencies:** None. This is the starting point.

*   **Task 2: Data Ingestion & Storage**
    *   **Subtasks:**
        1.  Develop a script to ingest and normalize the exercise knowledge base from the `wger` API dump.
        2.  Set up an embeddings store (e.g., Vertex AI Vector Search) and create a pipeline to ingest scientific references from the PMC OA dataset.
        3.  Create the initial workout database schema (Managed DB) to store user plans, logs, and feedback.
    *   **Dependencies:** `Task 1` (requires finalized schemas).

*   **Task 3: Evaluation Framework Setup**
    *   **Subtasks:**
        1.  Curate and create the "golden test set" of prompts for evaluating safety, correctness, and personalization.
        2.  Define the baseline metrics for plan quality, safety, and chat quality as outlined in the "Metrics" section.
    *   **Dependencies:** `Task 1`.

---

#### **Phase 2: Core Model Development (Weeks 3-4)**

This phase is dedicated to creating the first version of the fine-tuned model.

*   **Task 4: Teacher LLM - Synthetic Data Generation**
    *   **Subtasks:**
        1.  Set up the infrastructure for running the large teacher LLM (e.g., GPU-enabled environment).
        2.  Develop scripts to generate synthetic training data (plans, instructional cues, edits) using the teacher model.
    *   **Dependencies:** `Task 2` (needs the exercise KB as a foundation).

*   **Task 5: Student LLM v1 - Fine-tuning & Evaluation**
    *   **Subtasks:**
        1.  Build the fine-tuning pipeline for the smaller student LLM (e.g., using Vertex AI Training).
        2.  Fine-tune the student model on the synthetic data generated by the teacher LLM.
        3.  Run a baseline evaluation of the v1 model against the "golden test set".
        4.  Set up the model registry and version the first model.
    *   **Dependencies:** `Task 3` (for evaluation), `Task 4` (for training data).

---

#### **Phase 3: Backend & Mobile MVP (Weeks 5-6)**

This phase focuses on building the user-facing application and the API that powers it.

*   **Task 6: Backend API & RAG Pipeline**
    *   **Subtasks:**
        1.  Deploy a basic Flask backend service (e.g., on Cloud Run).
        2.  Implement the RAG (Retrieval-Augmented Generation) pipeline to ground chatbot responses.
        3.  Create API endpoints for user onboarding, goal setting, plan viewing/editing, and workout logging.
        4.  Integrate the v1 student LLM as an inference endpoint.
    *   **Dependencies:** `Task 2` (for RAG data sources), `Task 5` (for the LLM endpoint).

*   **Task 7: Mobile App MVP**
    *   **Subtasks:**
        1.  Set up the cross-platform mobile app project (React Native or Flutter).
        2.  Implement the UI for user onboarding and goal setting.
        3.  Build the interface for viewing, editing, and logging workouts.
        4.  Connect the mobile app to the backend API endpoints.
    *   **Dependencies:** `Task 6` (can be developed in parallel against a mock/staging API, but requires the final endpoints for integration).

---

#### **Phase 4: Feature Enhancement & Instrumentation (Weeks 7-8)**

This phase adds advanced features and prepares the system for monitoring.

*   **Task 8: Adaptation Engine Development**
    *   **Subtasks:**
        1.  Implement the deterministic rule-based logic for weekly plan progression.
        2.  Integrate the LLM to create a hybrid system for personalized adjustments and explanations.
    *   **Dependencies:** `Task 6`, `Task 7` (needs user log data to adapt from).

*   **Task 9: Video Generation & Caching**
    *   **Subtasks:**
        1.  Develop the LLM-based prompt builder for generating video demonstrations.
        2.  Set up a GCS bucket for storing generated video assets.
        3.  Implement a caching mechanism (e.g., using GCS path and cache keys) to prevent redundant video generation.
    *   **Dependencies:** `Task 6`.

*   **Task 10: Metrics Instrumentation**
    *   **Subtasks:**
        1.  Instrument the backend to capture system metrics (latency, error rate), cost metrics, and model quality metrics.
        2.  Instrument the mobile app to capture user behavior metrics (plan adherence, acceptance rate).
    *   **Dependencies:** `Task 7`, `Task 8`, `Task 9`.

---

#### **Phase 5: Hardening & Monitoring (Weeks 9-10)**

This phase focuses on reliability, safety, and preparing for the pilot test.

*   **Task 11: Monitoring & Drift Detection**
    *   **Subtasks:**
        1.  Build a prototype for monitoring model response quality and detecting drift.
        2.  Create dashboards for visualizing key system, data, and model metrics.
    *   **Dependencies:** `Task 10`.

*   **Task 12: Safety & Security Hardening**
    *   **Subtasks:**
        1.  Conduct focused red-team testing to identify safety and hallucination risks.
        2.  Implement and refine safety layers (e.g., policy prompts, refusal templates, content allowlists).
        3.  Perform a security audit, focusing on per-user data isolation and secret management.
    *   **Dependencies:** `Task 6`, `Task 7`.

---

#### **Phase 6: Pilot, Iteration & Finalization (Weeks 11-12)**

This final phase is for real-world testing and project wrap-up.

*   **Task 13: Pilot Test & Bug Fixing**
    *   **Subtasks:**
        1.  Deploy the integrated application to a group of pilot testers.
        2.  Establish a process for collecting feedback and bug reports.
        3.  Triage and fix critical bugs identified during the pilot.
    *   **Dependencies:** All preceding tasks.

*   **Task 14: Final Validation & Reporting**
    *   **Subtasks:**
        1.  Run a final evaluation to validate that the system meets the success and acceptance criteria.
        2.  Prepare the final project report and demonstration.
        3.  Ensure all documentation, especially the `README.md`, is complete and up-to-date.
    *   **Dependencies:** `Task 13`.